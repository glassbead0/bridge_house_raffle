<div class="page-header">
  <%= link_to 'Show All', tickets_path, class: 'btn btn-primary' %>
  <h1>Orders</h1>
</div>

<%# will_paginate @uniq_tickets, renderer: BootstrapPagination::Rails %>


<div class="table-responsive">
  <table class="table table-striped table-bordered table-hover">
    <thead>
    <tr>
      <th>Tickets</th>
      <th>First name</th>
      <th>MI</th>
      <th>Last name</th>
      <th>Email</th>
      <th>Subscribe</th>
      <th>Address line one</th>
      <th>Address line two</th>
      <th>City</th>
      <th>State</th>
      <th>Zip code</th>
      <th>Phone</th>
      <th>Location</th>
      <th>Payment</th>
      <th>#Tickets</th>
      <th>$Paid</th>
      <th>last4</th>
    </tr>
    </thead>

    <tbody>
    <% @uniq_tickets.each do |email, tickets| %>

      <tr>
        <% if tickets[0].number_of_tickets > 1 %>
          <td><%= tickets[0].id %> - <%= tickets[0].number_of_tickets.to_i + tickets[0].id - 1 %></td>
        <% else %>
          <td><%= tickets[0].id %></td>
        <% end %>
        <td><%= tickets[0].first_name %></td>
        <td><%= tickets[0].middle_initial %></td>
        <td><%= tickets[0].last_name %></td>
        <td><%= tickets[0].email %></td>
        <td><%= tickets[0].subscribe %></td>
        <td><%= tickets[0].address_line_one %></td>
        <td><%= tickets[0].address_line_two %></td>
        <td><%= tickets[0].city %></td>
        <td><%= tickets[0].state %></td>
        <td><%= tickets[0].zip_code %></td>
        <td><%= tickets[0].phone_number %></td>
        <td><%= tickets[0].location %></td>
        <td><%= tickets[0].payment_type %></td>
        <td><%= tickets[0].number_of_tickets %></td>
        <td><%= tickets[0].amount_paid %></td>
        <td><%= tickets[0].last_four_digits_of_card %></td>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
